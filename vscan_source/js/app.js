var app = angular.module('VScanner', ['ngMaterial']);
app.controller('VScannerCtrl', function($scope, $http){
        $scope.searchInput="naman-kumar/TestComment"
        clickme = function(){
            console.log("click called", $scope.searchInput)
            name = $scope.searchInput;
            $scope.get_data(name)
        }
        console.log(name)
        $scope.get_data = function(project){
        $http.get("http://deadpool.ops.ir1.inmobi.com:9000/commits?project="+project).then(function createAreaChart(resp)
                  {
                      console.log($scope.searchme);
                      //Revenue streams graph
                      console.log(resp['data'])
                      $scope.contents = resp['data']
                      vul_count = [];
                      commit_id = [];
                      $.each($scope.contents, function(idx, obj) 
                        { 
                             vul_count.push(obj.vul_cnt);
                             // commit_id.push(obj.idx);
                        });
                      console.log(vul_count)
                      // console.log(commit_id)
                      var options = {      
                                        // scaleLabel : "<%= Number(value).toFixed(0).slice(0, -3) + 'K'%>",
                                        scaleOverride: false,
                                        bezierCurve: false,
                                        scaleSteps: 10,
                                        scaleStepWidth: 5000,
                                        pointDotRadius: 5,
                                        scaleBeginAtZero: true,
                                        animation : false,
                                        scaleStartValue: 0,
                                        stacked: true
                                    };
                        
                      var chart_data = {
                            labels: ['a', 'b', 'c', 'd', 'e','g', 'h'],
                            datasets: [
                                        {
                                            fillColor: 'rgba(213, 0, 0, 1)',
                                            strokeColor: 'rgba(33, 33, 33, 1)',
                                            pointColor: 'rgba(33, 33, 33, 1)',
                                            pointStrokeColor: '#fff',
                                            pointHighlightFill: '#fff',
                                            pointHighlightStroke: 'rgba(244, 67, 54, 1)',
                                            data:vul_count
                                        }]
                        }
                        var chart = document.getElementById('scannedData');
                        var context = chart.getContext('2d');
                        var scanner_chart = new Chart(context).Line(chart_data, options);

              });
}
              // createAreaChart();
});

// app.controller("SearchCtrl", function($scope){

//     $scope.searchme = searchme;
//     console.log($scope.searchme);
// naman-kumar/TestComment
// })



